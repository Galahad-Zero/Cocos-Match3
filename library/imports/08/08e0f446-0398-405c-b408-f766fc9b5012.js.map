{"version":3,"sources":["assets\\Script\\gamePlay\\block\\BaseBlock.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;AAMtF,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;AAG5C,IAAqB,SAAS,GAA9B,MAAqB,SAAU,SAAQ,EAAE,CAAC,SAAS;IAAnD;;QAEI,aAAQ,GAAgB,IAAI,CAAC;QAE7B,YAAO,GAAgB,IAAI,CAAC;QAC5B,WAAM,GAAuB,IAAI,CAAC;IAqCtC,CAAC;IAnCU,SAAS;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAEM,QAAQ;QACX,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,QAAQ;IACD,KAAK;QACR,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,QAAQ;IACD,KAAK,CACR,MAAmB,EACnB,KAAyB,EACzB,MAAgB;QAEhB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACvE,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;QACtD,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SAC/B;QACD,IAAI,CAAC,QAAQ,CAAC,YAAY,CACtB,CAAC,EACD,WAAW,CAAC,SAAS,EACrB,WAAW,CAAC,MAAM,CACrB,CAAC;IACN,CAAC;CACJ,CAAA;AAxCG;IADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;2CACO;AAFZ,SAAS;IAD7B,OAAO;GACa,SAAS,CA0C7B;kBA1CoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SpineProperty from '../common/SpineProperty';\r\nimport { BlockConfig } from '../GameTypes';\r\nimport BlockStyleProperty from './BlockStyleProperty';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BaseBlock extends cc.Component {\r\n    @property(sp.Skeleton)\r\n    skeleton: sp.Skeleton = null;\r\n\r\n    _config: BlockConfig = null;\r\n    _style: BlockStyleProperty = null;\r\n\r\n    public getConfig(): BlockConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public getStyle(): BlockStyleProperty {\r\n        return this._style;\r\n    }\r\n\r\n    // 节点池回收\r\n    public unuse(): void {\r\n        this.skeleton.setToSetupPose();\r\n        this.skeleton.clearTracks();\r\n        this._config = null;\r\n        this._style = null;\r\n    }\r\n\r\n    // 节点池获取\r\n    public reuse(\r\n        config: BlockConfig,\r\n        style: BlockStyleProperty,\r\n        parent?: cc.Node\r\n    ): void {\r\n        this._config = config;\r\n        this._style = style;\r\n        const targetStyle = this._style.getAnimationInfo(this._config.special);\r\n        this.skeleton.skeletonData = targetStyle.skeletonData;\r\n        if (parent) {\r\n            this.node.setParent(parent);\r\n        }\r\n        this.skeleton.setAnimation(\r\n            0,\r\n            targetStyle.animation,\r\n            targetStyle.isLoop\r\n        );\r\n    }\r\n}\r\n"]}